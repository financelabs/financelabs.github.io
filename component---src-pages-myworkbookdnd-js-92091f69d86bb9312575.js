"use strict";(self.webpackChunk_r_ichard_gatsby_starter_bootstrap_5=self.webpackChunk_r_ichard_gatsby_starter_bootstrap_5||[]).push([[625],{8826:function(e,t,a){a.r(t),a.d(t,{Head:function(){return G},alphabet:function(){return X},default:function(){return Y}});var r=a(5785),l=a(7294),n=a(5998),s=a(2902),o=a(6301),c=a(1707),i=a(4284),m=a(2030),d=a(2410),u=a(4051),y=a(1555),f=a(7833),v=a(682),p=a(5005),E=a(4184),g=a.n(E),h=a(6792),b=a(4680),N=a(5893),Z=e=>l.forwardRef(((t,a)=>(0,N.jsx)("div",{...t,ref:a,className:g()(t.className,e)})));const I=l.forwardRef((({bsPrefix:e,className:t,variant:a,as:r="img",...l},n)=>{const s=(0,h.vE)(e,"card-img");return(0,N.jsx)(r,{ref:n,className:g()(a?`${s}-${a}`:s,t),...l})}));I.displayName="CardImg";var x=I;const k=l.createContext(null);k.displayName="CardHeaderContext";var C=k;const T=l.forwardRef((({bsPrefix:e,className:t,as:a="div",...r},n)=>{const s=(0,h.vE)(e,"card-header"),o=(0,l.useMemo)((()=>({cardHeaderBsPrefix:s})),[s]);return(0,N.jsx)(C.Provider,{value:o,children:(0,N.jsx)(a,{ref:n,...r,className:g()(t,s)})})}));T.displayName="CardHeader";var $=T;const w=Z("h5"),j=Z("h6"),R=(0,b.Z)("card-body"),S=(0,b.Z)("card-title",{Component:w}),_=(0,b.Z)("card-subtitle",{Component:j}),A=(0,b.Z)("card-link",{Component:"a"}),D=(0,b.Z)("card-text",{Component:"p"}),L=(0,b.Z)("card-footer"),O=(0,b.Z)("card-img-overlay"),P=l.forwardRef((({bsPrefix:e,className:t,bg:a,text:r,border:l,body:n,children:s,as:o="div",...c},i)=>{const m=(0,h.vE)(e,"card");return(0,N.jsx)(o,{ref:i,...c,className:g()(t,m,a&&`bg-${a}`,r&&`text-${r}`,l&&`border-${l}`),children:n?(0,N.jsx)(R,{children:s}):s})}));P.displayName="Card",P.defaultProps={body:!1};var H=Object.assign(P,{Img:x,Title:S,Subtitle:_,Body:R,Link:A,Text:D,Header:$,Footer:L,ImgOverlay:O});var M=l.forwardRef((({bsPrefix:e,className:t,striped:a,bordered:r,borderless:l,hover:n,size:s,variant:o,responsive:c,...i},m)=>{const d=(0,h.vE)(e,"table"),u=g()(t,d,o&&`${d}-${o}`,s&&`${d}-${s}`,a&&`${d}-${"string"==typeof a?`striped-${a}`:"striped"}`,r&&`${d}-bordered`,l&&`${d}-borderless`,n&&`${d}-hover`),y=(0,N.jsx)("table",{...i,className:u,ref:m});if(c){let e=`${d}-responsive`;return"string"==typeof c&&(e=`${e}-${c}`),(0,N.jsx)("div",{className:e,children:y})}return y})),z=a(1407),B=a(5453);const F=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];var U=function(e){void 0===e&&(e={}),console.log(e);let t=0,a=0;Object.keys(e).forEach((e=>{a<F.findIndex((t=>t===e.substring(0,1)))&&(a=F.findIndex((t=>t===e.substring(0,1)))+1),t<parseInt(e.substring(1))&&(t=parseInt(e.substring(1)))})),console.log(a,t);let r=new Array(t).fill("").map((()=>new Array(a).fill("")));return Object.keys(e).map((t=>{const[a,...l]=t;let n=F.findIndex((e=>e===a)),s=parseInt(l)-1;r[s][n]=e[t]})),r};var Y=function(){const e=(0,n.I0)();return l.useEffect((()=>{var t;console.log((0,m.jw)()),e((0,i.YE)({key:"caseType",value:"myworkbook"})),e((0,i.Rn)({arrayName:"caseDndItemsArray",arrayItems:[]})),e((0,i.Rn)({arrayName:"caseDndItems2Array",arrayItems:[]})),e((0,i.Rn)({arrayName:"caseDNDArray",arrayItems:[]})),e((0,i.YE)({key:"selectedNote",value:{}})),e((0,i.Z$)({type:"myworkbookdnd",email:null===(t=(0,m.jw)())||void 0===t?void 0:t.application.email}))}),[e]),l.createElement(o.Z,null,l.createElement("div",{className:"container text-center my-5"},l.createElement(J,null),l.createElement(Q,null)))};const G=()=>l.createElement(c.p,{title:"My workbook Drag and Drop"});function J(){const e=(0,n.v9)(i.Gs),t=(0,n.v9)(m.zJ);return e.length>0?l.createElement("div",{className:"d-grid gap-2 m-2"},l.createElement(p.Z,{variant:"outline-secondary",size:"sm",onClick:()=>function(){if(console.log(e),null!=t&&t.email){let a=t.email.replace(/[^a-zA-Z0-9]/g,"_"),r={};e.forEach((e=>{if("Корзина"===e.dndcolumn){r["/usersCraft/"+a+"/posts/"+e.id]=null;let t={...e,theme:"Корзина",id:(0,z.Z)("/usersCraft/"+a+"/posts/")},{dndcolumn:l,...n}=t;r["/usersCraft/"+a+"/posts/"+t.id]=n}else{let t={...e,theme:e.dndcolumn},{dndcolumn:l,...n}=t;r["/usersCraft/"+a+"/posts/"+e.id]=n}})),console.log(r),(0,B.Z)(r,"reload")}}()},"Сохранить изменения")):null}const K=(0,s.ZP)(((e,t)=>{if(console.log(t),"SETCOLUMNTITLE"===t.type)e[t.title]=t.value}));function Q(){const e=(0,n.I0)(),t=(0,n.v9)(i.L7),[a,s]=l.useReducer(K,{itemsTitle:"",items2Title:""});let o=(0,r.Z)(new Set([t.map((e=>null==e?void 0:e.theme))])).includes("Корзина")?(0,r.Z)(new Set(["..."].concat((0,r.Z)(t.map((e=>null==e?void 0:e.theme)))))):(0,r.Z)(new Set(["...","Корзина"].concat((0,r.Z)(t.map((e=>null==e?void 0:e.theme))))));if(t.length>0){const r=r=>{s({type:"SETCOLUMNTITLE",title:"itemsTitle",value:o[r.target.value]});let l=t.filter((e=>e.theme===o[r.target.value]||e.theme===a.items2Title));e((0,i.Rn)({arrayName:"caseDNDArrayInitial",arrayItems:l})),e((0,i.Rn)({arrayName:"caseDndItemsArray",arrayItems:t.filter((e=>e.theme===o[r.target.value])).map((e=>({id:null!=e&&e.id?e.id:(0,z.Z)("/usersCraft/"),dndcontent:e.title+" "+e.date,dndcolumn:e.theme,...e})))}))},n=r=>{s({type:"SETCOLUMNTITLE",title:"items2Title",value:o[r.target.value]});let l=t.filter((e=>e.theme===a.itemsTitle||e.theme===o[r.target.value]));e((0,i.Rn)({arrayName:"caseDNDArrayInitial",arrayItems:l})),e((0,i.Rn)({arrayName:"caseDndItems2Array",arrayItems:t.filter((e=>e.theme===o[r.target.value])).map((e=>({id:null!=e&&e.id?e.id:(0,z.Z)("/usersCraft/"),dndcontent:e.title+" "+e.date,dndcolumn:e.theme,...e})))}))};return console.log(a),l.createElement(v.Z,null,l.createElement(u.Z,null,l.createElement(y.Z,null,l.createElement(f.Z.Select,{"aria-label":"From",onChange:r},o.map(((e,t)=>l.createElement("option",{key:t,value:t.toString()},e))))),l.createElement(y.Z,null,l.createElement(f.Z.Select,{"aria-label":"To",onChange:n},o.map(((e,t)=>l.createElement("option",{key:t,value:t.toString()},e)))))),l.createElement(u.Z,null,l.createElement(V,null)),l.createElement(u.Z,null,l.createElement(d.Z,{key:a.itemsTitle+a.items2Title})))}return null}function V(){const e=(0,n.I0)(),t=(0,n.v9)(i.gk);return"object"==typeof t&&Object.keys(t).length>0?l.createElement(H,{className:"my-2"},l.createElement(H.Header,null,null==t?void 0:t.theme),l.createElement(H.Body,null,l.createElement(H.Title,null,null==t?void 0:t.title),l.createElement(H.Text,{dangerouslySetInnerHTML:{__html:null==t?void 0:t.quizString}}),"spreadsheet"===(null==t?void 0:t.type)?l.createElement(W,{xlArray:U(t.content)}):null,l.createElement(p.Z,{variant:"secondary",size:"sm",onClick:()=>e((0,i.YE)({key:"selectedNote",value:{}}))},"Закрыть")),l.createElement(H.Footer,{className:"text-muted text-center"},null==t?void 0:t.date)):null}function W(e){let{xlArray:t}=e;return l.createElement(M,{striped:!0,bordered:!0,hover:!0},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null," "),t[0].map(((e,t)=>l.createElement("th",{key:t,className:"text-center"},X[t]))))),l.createElement("tbody",null,t.map(((e,t)=>l.createElement("tr",{key:t},l.createElement("td",null," ",l.createElement("small",{className:"ml-1"},t+1)),e.map(((a,r)=>l.createElement("td",{key:t+r},l.createElement("small",null,e[r])))))))))}const X=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]}}]);
//# sourceMappingURL=component---src-pages-myworkbookdnd-js-92091f69d86bb9312575.js.map